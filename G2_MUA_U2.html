<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¤©éµæ¹–éŸ³æ¨‚è¤‡ç¿’ - å®Œæ•´å…¨é¡Œç›®ç‰ˆ</title>
    <style>
        :root { --primary: #6c5ce7; --secondary: #00cec9; --accent: #ff7675; --bg: #f0f2f5; }
        body { font-family: "Microsoft JhengHei", sans-serif; background-color: var(--bg); margin: 0; display: flex; justify-content: center; touch-action: manipulation; }
        #game-container { width: 100%; max-width: 600px; background: white; min-height: 100vh; padding: 20px; box-sizing: border-box; box-shadow: 0 0 15px rgba(0,0,0,0.1); }
        header { text-align: center; border-bottom: 3px solid var(--primary); margin-bottom: 20px; padding-bottom: 10px; }
        .menu-btn { width: 100%; padding: 20px; margin: 10px 0; font-size: 1.2rem; border: none; border-radius: 15px; background: var(--primary); color: white; cursor: pointer; font-weight: bold; }
        .stats { display: flex; justify-content: space-between; background: #f1f2f6; padding: 10px; border-radius: 10px; margin-bottom: 15px; font-weight: bold; }
        .question-box { font-size: 1.2rem; margin-bottom: 20px; line-height: 1.5; min-height: 60px; text-align: center; }
        .symbol-display { text-align: center; margin: 15px 0; }
        .text-symbol { font-size: 3.5rem; font-family: serif; font-style: italic; color: var(--accent); }
        .options-container { display: grid; gap: 10px; }
        button.option { background: white; border: 2px solid #dfe6e9; padding: 15px; font-size: 1.1rem; border-radius: 12px; cursor: pointer; text-align: left; }
        .correct { background-color: #55efc4 !important; border-color: #00b894 !important; }
        .wrong { background-color: #ff7675 !important; border-color: #d63031 !important; }
        .feedback { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); padding: 30px; border-radius: 20px; font-size: 1.8rem; display: none; z-index: 100; text-align: center; width: 80%; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
        .back-btn { background: #636e72; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin-bottom: 10px; }
        svg { width: 160px; height: 70px; }
        .yt-btn { display: inline-block; background: #ff0000; color: white; padding: 8px 20px; text-decoration: none; border-radius: 25px; font-size: 1rem; margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
<div id="game-container">
    <header>
        <h1>ã€ç¬¬äºŒèª²ï¼šã€Šå¤©éµæ¹–ã€‹ã€‘</h1>
        <p>æŸ´å¯å¤«æ–¯åŸº (1840-1893)</p>
        <a href="https://www.youtube.com/watch?v=L23XLW8DvXY" target="_blank" class="yt-btn">â–¶ è§€çœ‹ã€Šå¤©éµæ¹–ã€‹å½±ç‰‡</a>
    </header>

    <div id="main-menu">
        <button class="menu-btn" onclick="startSection('history')">ğŸ“– 1. ç”Ÿå¹³èˆ‡æ•…äº‹ (å…¨é¡Œåº«)</button>
        <button class="menu-btn" onclick="startSection('knowledge')">ğŸ» 2. éŸ³æ¨‚çŸ¥è­˜èˆ‡æ¨‚å™¨ (å…¨é¡Œåº«)</button>
        <button class="menu-btn" onclick="startSection('symbols')">ğŸ¼ 3. æ¨‚è­œè¨˜è™Ÿ (ä¿®æ­£ç‰ˆ)</button>
    </div>

    <div id="quiz-area" style="display:none;">
        <button class="back-btn" onclick="goHome()">â¬… è¿”å›é¸å–®</button>
        <div class="stats">
            <span id="progress">é€²åº¦ï¼š0 / 0</span>
            <button onclick="speakCurrent()">ğŸ”Š è®€é¡Œ</button>
        </div>
        <div id="symbol-box" class="symbol-display"></div>
        <div class="question-box" id="q-text"></div>
        <div class="options-container" id="options"></div>
    </div>

    <div id="result-screen" style="display:none; text-align:center;">
        <h2>ğŸ‰ å®Œæˆæ­¤ç« ç¯€è¤‡ç¿’ï¼</h2>
        <button class="menu-btn" onclick="goHome()">å›ä¸»é¸å–®</button>
    </div>
</div>
<div id="feedback-pop" class="feedback"></div>

<script>
const database = {
    history: [
        { q: "æŸ´å¯å¤«æ–¯åŸºå‡ºç”Ÿæ–¼å“ªåœ‹ï¼Ÿ", a: "ä¿„åœ‹", o: ["ä¿„åœ‹", "è‹±åœ‹", "æ³•åœ‹", "å¾·åœ‹"] },
        { q: "æŸ´å¯å¤«æ–¯åŸºå› ç‚ºç†±æ„›éŸ³æ¨‚æ”¾æ£„äº†ä»€éº¼å·¥ä½œï¼Ÿ", a: "å¸æ³•éƒ¨å·¥ä½œ", o: ["å¸æ³•éƒ¨å·¥ä½œ", "é†«ç”Ÿ", "è­¦å¯Ÿ", "è€å¸«"] },
        { q: "ä»–æ›¾è€ƒå…¥å“ªæ‰€éŸ³æ¨‚å­¸é™¢ä¿®è®€éŸ³æ¨‚ï¼Ÿ", a: "è–å½¼å¾—å ¡éŸ³æ¨‚å­¸é™¢", o: ["è–å½¼å¾—å ¡éŸ³æ¨‚å­¸é™¢", "æ¼”è—å­¸é™¢", "çš‡å®¶å­¸é™¢"] },
        { q: "ä»¥ä¸‹å“ªé½£ä¸æ˜¯ä»–çš„ä¸‰å¤§èŠ­è•¾èˆåŠ‡ä»£è¡¨ä½œï¼Ÿ", a: "ã€Šç±³å¥‡è€é¼ ã€‹", o: ["ã€Šå¤©éµæ¹–ã€‹", "ã€Šèƒ¡æ¡ƒå¤¾å­ã€‹", "ã€Šç¡ç¾äººã€‹", "ã€Šç±³å¥‡è€é¼ ã€‹"] },
        { q: "ã€Šå¤©éµæ¹–ã€‹çš„æ•…äº‹ä¸­ï¼Œå…¬ä¸»è®Šæˆäº†ä»€éº¼ï¼Ÿ", a: "å¤©éµ", o: ["å¤©éµ", "é’è›™", "è²“", "ç¡ç¾äºº"] },
        { q: "ç‹å­åœ¨æ‰“çµæ™‚é‡è¦‹å…¬ä¸»ï¼Œå¥¹å€‘åœ¨ä»€éº¼æ™‚é–“æ‰èƒ½å›å¾©äººå½¢ï¼Ÿ", a: "å¤œé–“", o: ["å¤œé–“", "æ—¥é–“", "é»ƒæ˜", "æ¸…æ™¨"] },
        { q: "ç‹å­åœ¨æ™šå®´å®£ä½ˆè¿å¨¶èª°ï¼ˆæƒ¡é­”çš„å¦¹å¦¹ï¼‰ï¼Ÿ", a: "é»‘å¤©éµ", o: ["é»‘å¤©éµ", "ç™½å¤©éµ", "ç°å§‘å¨˜"] },
        { q: "æ•…äº‹æœ€å¾Œï¼Œèª°å°å…¬ä¸»æ¨èº«çš„æ„›è§£é™¤äº†é­”å’’ï¼Ÿ", a: "é½Šæ ¼è²ç‹å­", o: ["é½Šæ ¼è²ç‹å­", "æƒ¡é­”", "æŸ´å¯å¤«æ–¯åŸº"] },
        { q: "è–ç¶“ç¾…é¦¬æ›¸5:8æåˆ°ï¼Œèª°åœ¨æˆ‘å€‘é‚„ä½œç½ªäººçš„æ™‚å€™ç‚ºæˆ‘å€‘æ­»ï¼Ÿ", a: "è€¶ç©ŒåŸºç£", o: ["è€¶ç©ŒåŸºç£", "é½Šæ ¼è²ç‹å­", "ç¥çˆ¶"] }
    ],
    knowledge: [
        { q: "èŠ­è•¾èˆåŠ‡æ˜¯ç”¨éŸ³æ¨‚å’Œä»€éº¼ä¾†è¡¨é”å…§å®¹ï¼Ÿ", a: "èˆè¹ˆ", o: ["èˆè¹ˆ", "å°ç™½", "æ­Œæ›²", "è©©è©"] },
        { q: "å¤©éµå…¬ä¸»çš„ä¸»é¡Œæ—‹å¾‹æ˜¯ç”±ä»€éº¼æ¨‚å™¨å¥å‡ºï¼Ÿ", a: "é›™ç°§ç®¡", o: ["é›™ç°§ç®¡", "é•·ç¬›", "å°æç´", "è±ç´"] },
        { q: "ä¸»é¡Œæ—‹å¾‹ä¸­ï¼Œç”±ä»€éº¼æ¨‚å™¨è² è²¬ä¼´å¥ï¼Ÿ", a: "è±ç´", o: ["è±ç´", "å®šéŸ³é¼“", "å–®ç°§ç®¡", "é‹¼ç´"] },
        { q: "Andante çš„æ„æ€æ˜¯ä»€éº¼ï¼Ÿ", a: "è¡Œæ¿", o: ["è¡Œæ¿", "å¿«æ¿", "æ…¢æ¿", "è·³æ¿"] },
        { q: "é•·ç¬›ã€é›™ç°§ç®¡ã€å–®ç°§ç®¡å’Œå·´æ¾ç®¡å±¬æ–¼ä»€éº¼çµ„åˆ¥ï¼Ÿ", a: "æœ¨ç®¡æ¨‚å™¨", o: ["æœ¨ç®¡æ¨‚å™¨", "å¼¦æ¨‚å™¨", "éŠ…ç®¡æ¨‚å™¨", "æ•²æ“Šæ¨‚å™¨"] },
        { q: "æœ¨ç®¡æ¨‚å™¨ç”±é«˜è‡³ä½æ’åˆ—ï¼Œæœ€é«˜éŸ³æ˜¯ï¼Ÿ", a: "é•·ç¬›", o: ["é•·ç¬›", "é›™ç°§ç®¡", "å–®ç°§ç®¡", "å·´æ¾ç®¡"] },
        { q: "æœ¨ç®¡æ¨‚å™¨ç”±é«˜è‡³ä½æ’åˆ—ï¼Œæœ€ä½éŸ³æ˜¯ï¼Ÿ", a: "å·´æ¾ç®¡", o: ["å·´æ¾ç®¡", "é•·ç¬›", "é›™ç°§ç®¡", "å–®ç°§ç®¡"] },
        { q: "å¤§æç´å’Œå°æç´å±¬æ–¼ä»€éº¼çµ„åˆ¥ï¼Ÿ", a: "å¼¦æ¨‚å™¨", o: ["å¼¦æ¨‚å™¨", "æœ¨ç®¡æ¨‚å™¨", "éŠ…ç®¡æ¨‚å™¨", "æ•²æ“Šæ¨‚å™¨"] },
        { q: "æ³•åœ‹è™Ÿã€é•·è™Ÿã€å¤§è™Ÿå±¬æ–¼ä»€éº¼çµ„åˆ¥ï¼Ÿ", a: "éŠ…ç®¡æ¨‚å™¨", o: ["éŠ…ç®¡æ¨‚å™¨", "å¼¦æ¨‚å™¨", "æœ¨ç®¡æ¨‚å™¨", "æ•²æ“Šæ¨‚å™¨"] },
        { q: "å¤§é¼“ã€å°é¼“ã€å®šéŸ³é¼“å±¬æ–¼ä»€éº¼çµ„åˆ¥ï¼Ÿ", a: "æ•²æ“Šæ¨‚å™¨", o: ["æ•²æ“Šæ¨‚å™¨", "éŠ…ç®¡æ¨‚å™¨", "æœ¨ç®¡æ¨‚å™¨", "å¼¦æ¨‚å™¨"] },
        { q: "æ‹å­è¨˜è™Ÿã€ŒCã€ä»£è¡¨å¹¾åˆ†ä¹‹å¹¾æ‹ï¼Ÿ", a: "4/4 æ‹", o: ["4/4 æ‹", "3/4 æ‹", "2/4 æ‹", "2/2 æ‹"] },
        { q: "æ¨‚è­œä¸­åœˆå‡ºçš„éƒ¨åˆ†ä»£è¡¨ä»€éº¼ï¼ˆæ­¤é¡ŒæŒ‡ä»£è·³éŸ³ï¼‰ï¼Ÿ", a: "è·³éŸ³", o: ["è·³éŸ³", "å¼·éŸ³", "å¼±éŸ³"] }
    ],
    symbols: [
        { isText: true, val: 'pp', q: "é€™å€‹è¨˜è™Ÿä»£è¡¨ï¼Ÿ", a: "æ¥µå¼±", o: ["æ¥µå¼±", "å¼±éŸ³", "å¼·éŸ³"] },
        { isText: true, val: 'p', q: "é€™å€‹è¨˜è™Ÿä»£è¡¨ï¼Ÿ", a: "å¼±éŸ³", o: ["å¼±éŸ³", "æ¥µå¼±", "æ¼¸å¼±"] },
        { isText: true, val: 'f', q: "é€™å€‹è¨˜è™Ÿä»£è¡¨ï¼Ÿ", a: "å¼·éŸ³", o: ["å¼·éŸ³", "å¼±éŸ³", "æ¥µå¼·"] },
        { isText: true, val: 'ff', q: "é€™å€‹è¨˜è™Ÿä»£è¡¨ï¼Ÿ", a: "æ¥µå¼·", o: ["æ¥µå¼·", "å¼·éŸ³", "æ¼¸å¼·"] },
        { isSym: true, val: '<svg viewBox="0 0 100 40"><path d="M10 20 L90 5 M10 20 L90 35" fill="none" stroke="black" stroke-width="3"/></svg>', q: "é€™å€‹ç¬¦è™Ÿ < ä»£è¡¨ä»€éº¼ï¼Ÿ", a: "æ¼¸å¼·", o: ["æ¼¸å¼·", "æ¼¸å¼±", "æ¥µå¼·"] },
        { isSym: true, val: '<svg viewBox="0 0 100 40"><path d="M90 20 L10 5 M90 20 L10 35" fill="none" stroke="black" stroke-width="3"/></svg>', q: "é€™å€‹ç¬¦è™Ÿ > ä»£è¡¨ä»€éº¼ï¼Ÿ", a: "æ¼¸å¼±", o: ["æ¼¸å¼±", "æ¼¸å¼·", "å¼±éŸ³"] }
    ]
};

let currentSection = []; let idx = 0; const synth = window.speechSynthesis;
function startSection(key) { currentSection = [...database[key]].sort(() => Math.random() - 0.5); idx = 0; document.getElementById('main-menu').style.display = 'none'; document.getElementById('quiz-area').style.display = 'block'; document.getElementById('result-screen').style.display = 'none'; render(); }
function render() {
    if (idx >= currentSection.length) { showResult(); return; }
    const data = currentSection[idx];
    document.getElementById('progress').innerText = `é€²åº¦ï¼š${idx + 1} / ${currentSection.length}`;
    document.getElementById('q-text').innerText = data.q;
    const symBox = document.getElementById('symbol-box'); symBox.innerHTML = '';
    if (data.isText) symBox.innerHTML = `<div class="text-symbol">${data.val}</div>`;
    else if (data.isSym) symBox.innerHTML = data.val;
    const optsDiv = document.getElementById('options'); optsDiv.innerHTML = '';
    [...data.o].sort(() => Math.random() - 0.5).forEach(opt => {
        const b = document.createElement('button'); b.className = 'option'; b.innerText = opt;
        b.onclick = () => check(opt, data.a, b); optsDiv.appendChild(b);
    });
    setTimeout(speakCurrent, 500);
}
function speakCurrent() {
    let t = currentSection[idx].q.replace('pp','P P').replace('ff','F F');
    const u = new SpeechSynthesisUtterance(t); u.lang = 'zh-HK'; synth.speak(u);
}
function check(sel, cor, btn) {
    const pop = document.getElementById('feedback-pop'); document.querySelectorAll('.option').forEach(b => b.disabled = true);
    if (sel === cor) { btn.classList.add('correct'); pop.innerText = "âœ… ç­”å°äº†ï¼"; pop.style.backgroundColor = "#d4edda"; pop.style.color = "#155724"; }
    else { btn.classList.add('wrong'); pop.innerText = `âŒ ç­”æ¡ˆæ˜¯ï¼š${cor}`; pop.style.backgroundColor = "#f8d7da"; pop.style.color = "#721c24"; }
    pop.style.display = 'block';
    setTimeout(() => { pop.style.display = 'none'; idx++; render(); }, 1800);
}
function showResult() { document.getElementById('quiz-area').style.display = 'none'; document.getElementById('result-screen').style.display = 'block'; }
function goHome() { document.getElementById('main-menu').style.display = 'block'; document.getElementById('quiz-area').style.display = 'none'; document.getElementById('result-screen').style.display = 'none'; synth.cancel(); }
</script>
</body>
</html>