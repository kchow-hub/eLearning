<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SRLã€Šä¸­ä¸€æˆèªåè¨€è­¦å¥æ‰‹å†Šã€‹è€ƒè©¦æº«ç¿’</title>
    <style>
        :root { --primary: #5856d6; --bg: #f2f2f7; --card: #ffffff; --success: #34c759; --error: #ff3b30; }
        body { margin: 0; padding: 0; font-family: -apple-system, sans-serif; background-color: var(--bg); color: #000; height: 100vh; overflow: hidden; }
        .app-container { width: 100%; max-width: 500px; margin: 0 auto; height: 100%; display: flex; flex-direction: column; position: relative; }
        .screen { flex: 1; display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .hidden { display: none !important; }
        .card { background: var(--card); border-radius: 20px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; text-align: center; }
        .btn { background: var(--primary); color: white; border: none; border-radius: 12px; padding: 16px; font-size: 18px; font-weight: 600; margin: 8px 0; width: 100%; cursor: pointer; -webkit-tap-highlight-color: transparent; }
        .btn-outline { background: none; color: var(--primary); border: 2px solid var(--primary); }
        .toolbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 25px; background: rgba(242,242,247,0.8); backdrop-filter: blur(10px); z-index: 100; }
        .sentence { font-size: 1.15rem; line-height: 1.6; margin: 20px 0; min-height: 80px; color: #3a3a3c; text-align: left; }
        .hint-text { background: #e5e5ea; padding: 12px; border-radius: 10px; letter-spacing: 5px; font-size: 1.2rem; font-weight: bold; margin-bottom: 20px; text-align: center; }
        input { width: 90%; padding: 15px; font-size: 1.4rem; border: 2px solid #d1d1d6; border-radius: 15px; text-align: center; outline: none; -webkit-appearance: none; }
        .list-item { background: white; padding: 15px; border-radius: 12px; margin-bottom: 10px; text-align: left; border-left: 5px solid var(--primary); }
        .list-item b { color: var(--primary); font-size: 1.1rem; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="toolbar">
        <span style="font-weight: bold;">ä¸­ä¸€èªæ–‡åŠ©æ‰‹</span>
        <button onclick="toggleSound()" id="sound-btn" style="border:none; background:none; font-size:24px;">ğŸ”Š</button>
    </div>

    <div id="scr-cover" class="screen">
        <div class="card" style="margin-top: 20px;">
            <div style="font-size: 60px;">ğŸ“–</div>
            <h1>è¦ªæƒ…èˆ‡å­é“</h1>
            <p style="color: #8e8e93;">å–®å…ƒä¸‰åŠå–®å…ƒå››æˆèªæ¸…å–®</p>
        </div>
        <button class="btn" onclick="initAndShowLevel()">å•Ÿå‹•ä¸¦é–‹å§‹ç·´ç¿’</button>
        <button class="btn btn-outline" onclick="showSummary()">æˆèªç¸½è¦½ (Full List)</button>
    </div>

    <div id="scr-level" class="screen hidden">
        <button onclick="showHome()" style="background:none; border:none; color:var(--primary); text-align:left; font-size:18px;">â† è¿”å›</button>
        <h2 style="text-align:center;">é¸æ“‡ç·´ç¿’æ¨¡å¼</h2>
        <button class="btn" onclick="startGame(1)">Level 1 (æ‰‹å†ŠåŸå¥)</button>
        <button class="btn" onclick="startGame(2)" style="background:#af52de">Level 2 (å…¨æ–°æ‡‰ç”¨)</button>
    </div>

    <div id="scr-game" class="screen hidden">
        <div id="progress" style="text-align:center; color:#8e8e93; margin-bottom:10px;"></div>
        <div class="card">
            <div id="q-text" class="sentence"></div>
            <div id="q-hint" class="hint-text"></div>
            <input type="text" id="ans-input" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" autocomplete="off">
            <div id="feedback" style="margin-top:15px; font-weight:bold; height:20px;"></div>
        </div>
        <button class="btn" onclick="checkAnswer()">æäº¤ç­”æ¡ˆ</button>
    </div>

    <div id="scr-summary" class="screen hidden">
        <button onclick="showHome()" style="background:none; border:none; color:var(--primary); text-align:left; font-size:18px; margin-bottom:10px;">â† è¿”å›ä¸»é </button>
        <div id="full-list-content"></div>
    </div>

    <div id="scr-result" class="screen hidden">
        <div class="card" style="margin-top:40px;">
            <h1 id="res-score"></h1>
            <p id="res-msg"></p>
        </div>
        <button class="btn" onclick="showHome()">å›ä¸»é </button>
    </div>
</div>

<audio id="snd-ok" preload="auto" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3"></audio>
<audio id="snd-no" preload="auto" src="https://assets.mixkit.co/active_storage/sfx/2018/2018-preview.mp3"></audio>

<script>
const idiomBank = [
    // å–®å…ƒä¸‰æ•¸æ“š [cite: 2]
    { word: "ç¦ä¸å–®è¡Œ", lv1: "ä»–ä»Šå¤©å¼„ä¸Ÿäº†éŒ¢åŒ…ï¼Œé‚„éºå¤±äº†æ™ºèƒ½é›»è©±ï¼ŒçœŸæ˜¯______ã€‚", lv2: "å‰›ä¸Ÿäº†å·¥ä½œåˆç”Ÿäº†ä¸€å ´é‡ç—…ï¼ŒçœŸæ˜¯______ã€‚" },
    { word: "ä¾†ä¾†å¾€å¾€", lv1: "æ¯é€¢å‡æ—¥ï¼Œæ¨‚åœ’çš„ç©¿æ¢­å·´å£«______æ¥è¼‰éŠå®¢ã€‚", lv2: "æ—ºè§’è¡—é ­äººæµ______ï¼Œç†±é¬§éå‡¡ã€‚" },
    { word: "æ±å¥”è¥¿èµ°", lv1: "å”å”ç‚ºäº†è™•ç†é€™æ¬¡å•†æ¥­ç³¾ç´›______ï¼Œå¹¸å¥½æœ€çµ‚èƒ½é †åˆ©è§£æ±ºã€‚", lv2: "ç‚ºäº†å°‹æ‰¾å¤±è¹¤çš„è²“å…’ï¼Œä»–åœ¨ç¤¾å€______äº†ä¸€æ•´å¤©ã€‚" },
    { word: "æŒä¸Šæ˜ç ", lv1: "è¡¨å¦¹æ˜¯èˆ…çˆ¶èˆ…æ¯çš„______ï¼Œå¥¹æƒ³è¦ç”šéº¼ï¼Œèˆ…çˆ¶èˆ…æ¯éƒ½æœƒæ»¿è¶³å¥¹ã€‚", lv2: "å°æ˜æ˜¯å®¶ä¸­çš„ç¨ç”Ÿå­ï¼Œè‡ªç„¶æ˜¯çˆ¶æ¯çš„______ã€‚" },
    { word: "èˆ‰ç›®ç„¡è¦ª", lv1: "ä»–ç¨è‡ªåˆ°æµ·å¤–å‡å­¸ï¼Œåœ¨ç•¶åœ°______ï¼Œååˆ†æ›å¿µå®¶ä¸­çš„é›™è¦ªã€‚", lv2: "éš»èº«åˆ°ç•°åœ°æ‰“æ‹¼çš„ä»–ï¼Œæ„Ÿåˆ°ååˆ†å¯‚å¯ä¸”______ã€‚" },
    { word: "ç…®è±†ç‡ƒè", lv1: "é€™å°å…„å¼Ÿç‚ºäº†å®¶è²¡è€Œ______ï¼Œè®“çˆ¶æ¯ç—›å¿ƒé›£éã€‚", lv2: "ç‚ºäº†ä¸€é»å°åˆ©è€Œæ‰‹è¶³ç›¸æ®˜ï¼Œç°¡ç›´æ˜¯______ã€‚" },
    { word: "ç„¡å¾®ä¸è‡³", lv1: "çˆ¶æ¯______åœ°ç…§é¡§æˆ‘å€‘ï¼Œæˆ‘å€‘é›£ä»¥å ±ç­”ä»–å€‘ã€‚", lv2: "é†«è­·äººå“¡å°æ‚£è€…çš„é—œç…§çœŸæ˜¯______ã€‚" },
    { word: "ç›¸ä¾ç‚ºå‘½", lv1: "å®¶å¯¶è‡ªå°ç”±ç¥–æ¯ç…§é¡§ï¼Œå¥¹å€‘______ï¼Œæ‰€ä»¥æ„Ÿæƒ…éå¸¸æ·±åšã€‚", lv2: "æˆ°å¾Œé€™å°å­¤å…’å…„å¦¹åªèƒ½______ã€‚" },
    { word: "å¯¸è‰æ˜¥æš‰", lv1: "äººå€‘å¸¸èªªã€Œ______ã€ï¼Œå³ä½¿æˆ‘å€‘ç›¡å¿ƒç›¡åŠ›ï¼Œä¹Ÿé›£ä»¥å ±ç­”çˆ¶æ¯çš„é¤Šè‚²ä¹‹æ©ã€‚", lv2: "çˆ¶æ¯æ©æƒ…é‡å¦‚å±±ï¼Œç‚ºäººå­è€…ç•¶æ‡·______ã€‚" },
    { word: "çˆ¶æ…ˆå­å­", lv1: "å¼µå…ˆç”Ÿä¸‰ä»£åŒå ‚ï¼Œ______ï¼Œä¸€å®¶å¹¸ç¦å¿«æ¨‚åœ°ç”Ÿæ´»ã€‚", lv2: "å¹¸ç¦å®¶åº­çš„ç§˜è¨£å¾€å¾€åœ¨æ–¼______ã€‚" },
    { word: "æ¨¹æ¬²éœè€Œé¢¨ä¸æ­¢ï¼Œå­æ¬²é¤Šè€Œè¦ªä¸åœ¨ã€‚", lv1: "ã€Œ______ã€ï¼Œå› æ­¤æˆ‘å€‘è¦å¥½å¥½å­é †çˆ¶æ¯ï¼Œåˆ¥è®“æ—¥å¾Œå¾Œæ‚”è«åŠã€‚", lv2: "è«å¾…é›™è¦ªé›¢å»æ‰éºæ†¾ã€Œ______ã€ã€‚" },
    { word: "è€å¾è€ï¼Œä»¥åŠäººä¹‹è€ï¼›å¹¼å¾å¹¼ï¼Œä»¥åŠäººä¹‹å¹¼ã€‚", lv1: "å‡å¦‚äººäººåšåˆ°ã€Œ______ã€ï¼Œä¸ä½†èƒ½ä½¿å®¶åº­å’Œç¦ï¼Œé‚„èƒ½ä»¤ç¤¾æœƒé”è‡´å’Œè«§ã€‚", lv2: "é€™ç¨®æ¨å·±åŠäººçš„åšæ„›ç²¾ç¥æ­£æ˜¯ã€Œ______ã€ã€‚" },
    // å–®å…ƒå››æ•¸æ“š [cite: 4]
    { word: "æ’²æœ”è¿·é›¢", lv1: "é€™å®—åšç‰©é¤¨å¤±ç«Šæ¡ˆ______ï¼Œè½Ÿå‹•äº†å…¨åŸã€‚", lv2: "é€™éƒ¨åµæ¢å°èªªçš„çµå±€çœŸæ˜¯______ï¼Œé›£ä»¥æ‰æ‘¸ã€‚" },
    { word: "å¤©å€«ä¹‹æ¨‚", lv1: "æ¯é€¢å‡æ—¥ï¼Œå¤§æ‰¹å¸‚æ°‘æ‰¶è€æ”œå¹¼ï¼Œä¾†åˆ°é€™å€‹å…¬åœ’å…±æ•______ã€‚", lv2: "å‡æ—¥èˆ‡çˆ¶æ¯å»éƒŠéŠï¼Œæœ€èƒ½äº«å—______ã€‚" },
    { word: "é èµ°é«˜é£›", lv1: "ä½ æ€èƒ½ä¸Ÿä¸‹çˆ¶æ¯ä¸ç†ï¼Œè‡ªå·±______ï¼", lv2: "ä»–å¸Œæœ›èƒ½æ”¾ä¸‹ä¸€åˆ‡ï¼Œä¸€å€‹äººå»æµæµªï¼Œ______ã€‚" },
    { word: "æ…ˆçƒåå“º", lv1: "çˆ¶æ¯å°æˆ‘å€‘æœ‰é¤Šè‚²ä¹‹æ©ï¼Œæˆ‘å€‘æ‡‰ç•¶æ•ˆæ³•çƒé´‰ï¼Œåšåˆ°______ã€‚", lv2: "ä¾›é¤Šå¹´é‚çš„çˆ¶æ¯æ˜¯ç‚ºäººå­å¥³æ‡‰æœ‰çš„______ä¹‹å¿ƒã€‚" },
    { word: "å­å­è³¢å­«", lv1: "æ¯é€¢æ¸…æ˜ç¯€ï¼Œä¾¿æœ‰å¤§æ‰¹______å‰å¾€æƒå¢“ã€‚", lv2: "ä»–åœ¨æ‘è£¡å¯æ˜¯å‡ºåçš„______ï¼Œå°çˆ¶æ¯éå¸¸æ­é †ã€‚" },
    { word: "ä»»å‹ä»»æ€¨", lv1: "åª½åª½______åœ°ç…§é¡§æˆ‘å€‘ï¼Œæˆ‘é•·å¤§å¾Œä¸€å®šè¦å¥½å¥½å ±ç­”å¥¹ã€‚", lv2: "é€™ä½è€å“¡å·¥åœ¨å…¬å¸æœå‹™å¤šå¹´ï¼Œä¸€å‘______ã€‚" },
    { word: "å«è¾›èŒ¹è‹¦", lv1: "é€™ä½æ¯è¦ªé•·å¹´ç´¯æœˆ______åœ°ç…§é¡§æ‚£ç—…çš„å­©å­ï¼Œä»¤äººæ•¬ä½©ã€‚", lv2: "çˆ¶æ¯______æŠŠæˆ‘å€‘å¸¶å¤§ï¼Œæˆ‘å€‘ä¸€å®šè¦å¥½å¥½å ±ç­”ã€‚" },
    { word: "æ…çµ‚è¿½é ", lv1: "äººå€‘åœ¨æ¸…æ˜ç¯€æƒå¢“ç¥­ç¥–ï¼Œé«”ç¾äº†______çš„ç²¾ç¥ã€‚", lv2: "ä¸­è¯å‚³çµ±æ–‡åŒ–éå¸¸è¬›ç©¶ç¥­ç¥–å’Œ______ã€‚" },
    { word: "ç¿©ç¿©èµ·èˆ", lv1: "éš¨ç€æ‚ æšçš„éŸ³æ¨‚éŸ¿èµ·ï¼Œå¤§å®¶è·Ÿç€æ‹å­______ã€‚", lv2: "å½©è¶åœ¨èŠ±å¢ä¸­______ã€‚" },
    { word: "æ¯é€¢ä½³ç¯€å€æ€è¦ªã€‚", lv1: "ã€Œ______ã€ï¼Œä¸­ç§‹ç¯€å¯èªªæ˜¯æœ€å®¹æ˜“å‹¾èµ·éŠå­æ€é„‰æƒ…æ‡·çš„ç¯€æ—¥ã€‚", lv2: "ç¨è‡ªåœ¨å¤–æ±‚å­¸çš„äººï¼Œåœ¨æ˜¥ç¯€æœ€èƒ½é«”æœƒã€Œ______ã€ã€‚" }
];

let currentLevel = 1, currentQs = [], qIdx = 0, score = 0, soundOn = true;

// --- iOS éŸ³æ•ˆä¿®å¾©é—œéµæ­¥é©Ÿ ---
function initAndShowLevel() {
    // ç•¶ç”¨æˆ¶é»æ“ŠæŒ‰éˆ•æ™‚ï¼ŒéœéŸ³æ’­æ”¾ä¸€ä¸‹éŸ³æ•ˆä»¥ã€Œè§£é–ã€iOS çš„éŸ³æ•ˆé–‹é—œ
    const s1 = document.getElementById('snd-ok');
    const s2 = document.getElementById('snd-no');
    s1.play().then(() => { s1.pause(); s1.currentTime = 0; });
    s2.play().then(() => { s2.pause(); s2.currentTime = 0; });
    
    showLevel();
}

function showHome() { document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden')); document.getElementById('scr-cover').classList.remove('hidden'); }
function showLevel() { document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden')); document.getElementById('scr-level').classList.remove('hidden'); }
function toggleSound() { soundOn = !soundOn; document.getElementById('sound-btn').innerText = soundOn ? "ğŸ”Š" : "ğŸ”ˆ"; }

function showSummary() {
    const cont = document.getElementById('full-list-content');
    cont.innerHTML = idiomBank.map(i => `<div class="list-item"><b>${i.word}</b><p>${i.lv1}</p></div>`).join('');
    document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
    document.getElementById('scr-summary').classList.remove('hidden');
}

function startGame(lv) {
    currentLevel = lv; qIdx = 0; score = 0;
    currentQs = [...idiomBank].sort(()=>0.5-Math.random()).slice(0,10);
    document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
    document.getElementById('scr-game').classList.remove('hidden');
    loadQ();
}

function loadQ() {
    const q = currentQs[qIdx];
    document.getElementById('progress').innerText = `é¡Œç›® ${qIdx + 1} / 10`;
    document.getElementById('q-text').innerText = (currentLevel === 1) ? q.lv1 : q.lv2;
    
    // ç”Ÿæˆéš¨æ©Ÿæç¤º
    const r = Math.floor(Math.random()*4);
    let h = ["â–¡","â–¡","â–¡","â–¡"]; 
    if(q.word.length <= 4) { h[r] = q.word[r]; } else { h = ["å","è¨€","å¥"]; }
    
    document.getElementById('q-hint').innerText = "æç¤ºï¼š" + h.join(" ");
    document.getElementById('ans-input').value = "";
    document.getElementById('feedback').innerText = "";
    document.getElementById('ans-input').focus();
}

function checkAnswer() {
    const user = document.getElementById('ans-input').value.trim();
    const correct = currentQs[qIdx].word;
    const fb = document.getElementById('feedback');
    
    if (user === correct) {
        score++; fb.style.color = "var(--success)"; fb.innerText = "æ­£ç¢ºï¼ğŸ‘";
        if(soundOn) document.getElementById('snd-ok').play();
        setTimeout(next, 1000);
    } else {
        fb.style.color = "var(--error)"; fb.innerText = "æ­£ç¢ºç­”æ¡ˆï¼š" + correct;
        if(soundOn) document.getElementById('snd-no').play();
        setTimeout(next, 2500);
    }
}

function next() {
    qIdx++;
    if(qIdx < 10) loadQ();
    else {
        document.getElementById('res-score').innerText = `å¾—åˆ†ï¼š${score} / 10`;
        document.getElementById('res-msg').innerText = score >= 8 ? "è¡¨ç¾å‡ºè‰²ï¼ç¹¼çºŒä¿æŒï¼" : "å†å¤šæº«ç¿’æ¸…å–®ï¼ŒåŠ æ²¹ï¼";
        document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
        document.getElementById('scr-result').classList.remove('hidden');
    }
}

document.getElementById('ans-input').addEventListener('keypress', (e)=>{if(e.key==='Enter') checkAnswer();});
</script>
</body>
</html>