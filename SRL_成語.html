<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ã€Šä¸­ä¸€æˆèªåè¨€è­¦å¥æ‰‹å†Šã€‹é 21-32</title>
    <style>
        :root { --primary: #007aff; --bg: #f2f2f7; --card: #ffffff; --success: #34c759; --error: #ff3b30; }
        body { margin: 0; padding: 0; font-family: -apple-system, sans-serif; background-color: var(--bg); color: #000; height: 100vh; overflow: hidden; }
        .app-container { width: 100%; max-width: 500px; margin: 0 auto; height: 100%; display: flex; flex-direction: column; }
        .screen { flex: 1; display: flex; flex-direction: column; padding: 25px; box-sizing: border-box; overflow-y: auto; }
        .hidden { display: none !important; }
        .card { background: var(--card); border-radius: 20px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; text-align: center; }
        .btn { background: var(--primary); color: white; border: none; border-radius: 12px; padding: 18px; font-size: 18px; font-weight: 600; margin: 10px 0; width: 100%; cursor: pointer; -webkit-tap-highlight-color: transparent; }
        .btn-outline { background: none; color: var(--primary); border: 2px solid var(--primary); }
        .sentence { font-size: 1.2rem; line-height: 1.7; margin: 20px 0; color: #1c1c1e; text-align: left; }
        .hint-text { background: #e5e5ea; padding: 15px; border-radius: 12px; letter-spacing: 5px; font-size: 1.3rem; font-weight: bold; margin-bottom: 20px; }
        input { width: 100%; padding: 15px; font-size: 1.5rem; border: 2px solid #d1d1d6; border-radius: 15px; text-align: center; outline: none; box-sizing: border-box; -webkit-appearance: none; }
        
        /* List Style */
        .list-item { background: white; padding: 18px; border-radius: 15px; margin-bottom: 15px; text-align: left; border-left: 6px solid var(--primary); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .list-item b { color: var(--primary); font-size: 1.2rem; display: block; margin-bottom: 5px; }
        .list-item .def { color: #d9534f; font-weight: 600; font-size: 0.95rem; margin-bottom: 5px; }
        .list-item .eg { color: #636366; font-size: 0.9rem; font-style: italic; }
    </style>
</head>
<body>

<div class="app-container">
    <div id="scr-cover" class="screen">
        <div class="card" style="margin-top: 40px;">
            <div style="font-size: 60px;">ğŸ“š</div>
            <h1 style="font-size: 28px;">ã€Šä¸­ä¸€æˆèªåè¨€è­¦å¥æ‰‹å†Šã€‹é 21-32</h1>
            <p style="color: #8e8e93;">å–®å…ƒä¸‰ã€å››ï¼šè¦ªæƒ…èˆ‡å­é“</p>
        </div>
        <button class="btn" onclick="initAudioAndShowLevel()">é–‹å§‹ç·´ç¿’ (10é¡Œ)</button>
        <button class="btn btn-outline" onclick="showSummary()">æˆèªç¸½è¦½ (å«è§£é‡‹)</button>
    </div>

    <div id="scr-level" class="screen hidden">
        <button onclick="showHome()" style="background:none; border:none; color:var(--primary); text-align:left; font-size:18px; padding: 10px 0;">â† è¿”å›</button>
        <h2 style="text-align:center;">é¸æ“‡ç·´ç¿’æ¨¡å¼</h2>
        <button class="btn" onclick="startGame(1)">Level 1 (æ‰‹å†ŠåŸå¥ç·´ç¿’)</button>
        <button class="btn" onclick="startGame(2)" style="background:#af52de">Level 2 (å…¨æ–°æƒ…å¢ƒæ‡‰ç”¨)</button>
    </div>

    <div id="scr-game" class="screen hidden">
        <div id="progress" style="text-align:center; color:#8e8e93; margin-bottom:15px; font-weight: 600;"></div>
        <div class="card">
            <div id="q-text" class="sentence"></div>
            <div id="q-hint" class="hint-text"></div>
            <input type="text" id="ans-input" placeholder="è«‹è¼¸å…¥ç­”æ¡ˆ" autocomplete="off">
            <div id="feedback" style="margin-top:20px; font-weight:bold; min-height:24px;"></div>
        </div>
        <button class="btn" onclick="checkAnswer()">æäº¤ç­”æ¡ˆ</button>
    </div>

    <div id="scr-summary" class="screen hidden">
        <button onclick="showHome()" style="background:none; border:none; color:var(--primary); text-align:left; font-size:18px; margin-bottom: 15px;">â† è¿”å›ä¸»é </button>
        <h2 style="margin-bottom: 20px;">æˆèª/åè¨€ å®Œæ•´æ¸…å–®</h2>
        <div id="full-list-content"></div>
    </div>

    <div id="scr-result" class="screen hidden">
        <div class="card" style="margin-top:40px;">
            <h1 id="res-score" style="font-size: 48px; color: var(--primary);"></h1>
            <p id="res-msg" style="font-size: 20px;"></p>
        </div>
        <button class="btn" onclick="showHome()">è¿”å›ä¸»é </button>
    </div>
</div>

<audio id="snd-correct" src="https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3" preload="auto"></audio>
<audio id="snd-wrong" src="https://assets.mixkit.co/active_storage/sfx/2018/2018-preview.mp3" preload="auto"></audio>

<script>
// å®Œæ•´æ•¸æ“šåº«ï¼šåŒ…å«è§£é‡‹èˆ‡ä¾‹å¥ 
const idiomBank = [
    { word: "ç¦ä¸å–®è¡Œ", def: "æŒ‡ä¸å¹¸çš„äº‹æ¥é€£ç™¼ç”Ÿã€‚", lv1: "ä»–ä»Šå¤©å¼„ä¸Ÿäº†éŒ¢åŒ…ï¼Œé‚„éºå¤±äº†æ™ºèƒ½é›»è©±ï¼ŒçœŸæ˜¯______ã€‚", lv2: "å‰›ä¸Ÿäº†å·¥ä½œï¼Œå®¶è£¡åˆé‡ä¸Šæ¼æ°´ï¼ŒçœŸæ˜¯______ã€‚" },
    { word: "ä¾†ä¾†å¾€å¾€", def: "å½¢å®¹ä¸æ–·çš„å¾€ä¾†ã€‚", lv1: "æ¯é€¢å‡æ—¥ï¼Œæ¨‚åœ’çš„ç©¿æ¢­å·´å£«______æ¥è¼‰éŠå®¢ã€‚", lv2: "æ©Ÿå ´å¤§å»³äººæ½®______ï¼Œå¤§å®¶éƒ½è¶•è‘—å‡ºåœ‹ã€‚" },
    { word: "æ±å¥”è¥¿èµ°", def: "å½¢å®¹å››è™•å¥”èµ°æˆ–ç‚ºæŸå€‹ç›®çš„è€Œåˆ°è™•æ´»å‹•ã€‚", lv1: "å”å”ç‚ºäº†è™•ç†é€™æ¬¡å•†æ¥­ç³¾ç´›______ï¼Œå¹¸å¥½æœ€çµ‚èƒ½é †åˆ©è§£æ±ºã€‚", lv2: "ç‚ºäº†æ›¿ç”Ÿç—…çš„æ¯è¦ªç±Œé†«è—¥è²»ï¼Œä»–åˆ°è™•______ã€‚" },
    { word: "æŒä¸Šæ˜ç ", def: "æ¯”å–»çˆ¶æ¯ç‰¹åˆ¥ç–¼æ„›çš„å¥³å…’ã€‚", lv1: "è¡¨å¦¹æ˜¯èˆ…çˆ¶èˆ…æ¯çš„______ï¼Œå¥¹æƒ³è¦ç”šéº¼ï¼Œèˆ…çˆ¶èˆ…æ¯éƒ½æœƒæ»¿è¶³å¥¹ã€‚", lv2: "ä»–æ˜¯å®¶ä¸­çš„ç¨ç”Ÿå¥³ï¼Œè‡ªç„¶è¢«è¦–ç‚ºçˆ¶æ¯çš„______ã€‚" },
    { word: "èˆ‰ç›®ç„¡è¦ª", def: "æ²’æœ‰ä¸€å€‹è¦ªäººã€‚å½¢å®¹å­¤è‹¦ç„¡ä¾ã€‚", lv1: "ä»–ç¨è‡ªåˆ°æµ·å¤–å‡å­¸ï¼Œåœ¨ç•¶åœ°______ï¼Œååˆ†æ›å¿µå®¶ä¸­çš„é›™è¦ªã€‚", lv2: "éš»èº«åˆ°ç•°åœ°æ‰“æ‹¼çš„ä»–ï¼Œæ·±æ„Ÿå­¤ç¨ï¼Œ______ã€‚" },
    { word: "ç…®è±†ç‡ƒè", def: "æ¯”å–»å…„å¼Ÿç›¸é€¼ï¼Œä¸é¡§è¦ªæƒ…ï¼Œéª¨è‚‰ç›¸æ®˜ã€‚", lv1: "é€™å°å…„å¼Ÿç‚ºäº†å®¶è²¡è€Œ______ï¼Œè®“çˆ¶æ¯ç—›å¿ƒé›£éã€‚", lv2: "ç‚ºäº†éºç”¢è€Œé¬§ä¸Šæ³•åº­ï¼Œå…„å¼Ÿç›¸æ®˜ï¼Œç°¡ç›´æ˜¯______ã€‚" },
    { word: "ç„¡å¾®ä¸è‡³", def: "ç…§é¡§åˆ°æ¯ä¸€é …ç´°ç¯€ã€‚å½¢å®¹éå¸¸ä»”ç´°ã€‚", lv1: "çˆ¶æ¯______åœ°ç…§é¡§æˆ‘å€‘ï¼Œæˆ‘å€‘é›£ä»¥å ±ç­”ä»–å€‘ã€‚", lv2: "è­·å£«å°ç—…äººç…§é¡§å¾—______ï¼Œæ·±å—å¤§å®¶æ„Ÿæ¿€ã€‚" },
    { word: "ç›¸ä¾ç‚ºå‘½", def: "å½¼æ­¤ä¾é åœ°ç”Ÿæ´»ã€‚", lv1: "å®¶å¯¶è‡ªå°ç”±ç¥–æ¯ç…§é¡§ï¼Œå¥¹å€‘______ï¼Œæ‰€ä»¥æ„Ÿæƒ…éå¸¸æ·±åšã€‚", lv2: "é€™å°è€å¤«å©¦æ²’æœ‰å­å¥³ï¼Œå¹¾åå¹´ä¾†ä¸€ç›´______ã€‚" },
    { word: "å¯¸è‰æ˜¥æš‰", def: "ä»¥å°è‰æ¯”å–»å­å¥³ï¼Œæ˜¥æš‰æ¯”å–»æ¯æ„›ã€‚æŒ‡å­å¥³é›£ä»¥å ±ç­”çˆ¶æ¯æ·±é‡æ©æƒ…ã€‚", lv1: "äººå€‘å¸¸èªªã€Œ______ã€ï¼Œå³ä½¿æˆ‘å€‘ç›¡å¿ƒç›¡åŠ›ï¼Œä¹Ÿé›£ä»¥å ±ç­”çˆ¶æ¯çš„é¤Šè‚²ä¹‹æ©ã€‚", lv2: "æ¯ç•¶æƒ³èµ·çˆ¶æ¯çš„æ“å‹ï¼Œå°±æ·±æ„Ÿ______ä¹‹æƒ…ã€‚" },
    { word: "çˆ¶æ…ˆå­å­", def: "çˆ¶è¦ªä»æ…ˆï¼Œç–¼æ„›å­å¥³ï¼›å…’å¥³å­é †çˆ¶æ¯ã€‚", lv1: "å¼µå…ˆç”Ÿä¸‰ä»£åŒå ‚ï¼Œ______ï¼Œä¸€å®¶å¹¸ç¦å¿«æ¨‚åœ°ç”Ÿæ´»ã€‚", lv2: "åªè¦å…¨å®¶äººå’Œç¦ç›¸è™•ã€______ï¼Œå®¶åº­å°±æœƒå¹¸ç¦ã€‚" },
    { word: "æ¨¹æ¬²éœè€Œé¢¨ä¸æ­¢ï¼Œå­æ¬²é¤Šè€Œè¦ªä¸åœ¨ã€‚", def: "å½¢å®¹ä¸–äº‹ä¸èƒ½å¦‚äººæ„ï¼Œå­å¥³æ¬²ç›¡å­æ™‚çˆ¶æ¯å·²ä¸åœ¨ã€‚", lv1: "ã€Œ______ã€ï¼Œå› æ­¤æˆ‘å€‘è¦å¥½å¥½å­é †çˆ¶æ¯ï¼Œåˆ¥è®“æ—¥å¾Œå¾Œæ‚”è«åŠã€‚", lv2: "ä¸è¦ç­‰åˆ°çˆ¶æ¯é›¢é–‹å¾Œæ‰æ„Ÿå˜†ã€Œ______ã€ã€‚" },
    { word: "è€å¾è€ï¼Œä»¥åŠäººä¹‹è€ï¼›å¹¼å¾å¹¼ï¼Œä»¥åŠäººä¹‹å¹¼ã€‚", def: "å°Šæ•¬è‡ªå·±çš„é•·è¼©ï¼Œæ“´å±•åˆ°å°Šæ•¬å…¶ä»–é•·è€…ï¼›é—œæ„›è‡ªå·±çš„å­©å­ï¼Œæ¨æ“´è‡³æ„›è­·åˆ¥äººçš„å­©å­ã€‚", lv1: "å‡å¦‚äººäººåšåˆ°ã€Œ______ã€ï¼Œä¸ä½†èƒ½ä½¿å®¶åº­å’Œç¦ï¼Œé‚„èƒ½ä»¤ç¤¾æœƒé”è‡´å’Œè«§ã€‚", lv2: "é€™ç¨®æ¨å·±åŠäººçš„åšæ„›ç²¾ç¥ï¼Œå°±æ˜¯ã€Œ______ã€ã€‚" },
    { word: "æ’²æœ”è¿·é›¢", def: "å½¢å®¹äº‹æƒ…éŒ¯ç¶œè¤‡é›œï¼Œä¸æ˜“çœ‹æ¸…çœŸç›¸ã€‚", lv1: "é€™å®—åšç‰©é¤¨å¤±ç«Šæ¡ˆ______ï¼Œè½Ÿå‹•äº†å…¨åŸã€‚", lv2: "é€™éƒ¨åµæ¢å°èªªçš„æ¡ˆæƒ…______ï¼Œè®“è®€è€…çŒœä¸åˆ°çœŸå…‡ã€‚" },
    { word: "å¤©å€«ä¹‹æ¨‚", def: "æŒ‡å®¶äººåœ˜èšæ™‚çš„æ­¡æ¨‚ã€‚", lv1: "æ¯é€¢å‡æ—¥ï¼Œå¤§æ‰¹å¸‚æ°‘æ‰¶è€æ”œå¹¼ï¼Œä¾†åˆ°é€™å€‹å…¬åœ’å…±æ•______ã€‚", lv2: "æ–°å¹´æœŸé–“å…¨å®¶æ­¡èšåƒåœ˜å¹´é£¯ï¼Œå…±äº«______ã€‚" },
    { word: "é èµ°é«˜é£›", def: "é€ƒé¿åˆ°é è™•å»ã€‚", lv1: "ä½ æ€èƒ½ä¸Ÿä¸‹çˆ¶æ¯ä¸ç†ï¼Œè‡ªå·±______ï¼", lv2: "ä»–ç‚ºäº†è¿½æ±‚å¤¢æƒ³ï¼Œæ±ºå®šé›¢é–‹å®¶é„‰ï¼Œç¨è‡ª______ã€‚" },
    { word: "æ…ˆçƒåå“º", def: "æ¯”å–»å­å¥³å ±ç­”çˆ¶æ¯çš„é¤Šè‚²ä¹‹æ©ã€‚", lv1: "çˆ¶æ¯å°æˆ‘å€‘æœ‰é¤Šè‚²ä¹‹æ©ï¼Œæˆ‘å€‘æ‡‰ç•¶æ•ˆæ³•çƒé´‰ï¼Œåšåˆ°______ã€‚", lv2: "ç‚ºäººå­å¥³æ‡‰ç›¡å­é“ï¼Œå¯¦è¸______çš„ç²¾ç¥ã€‚" },
    { word: "å­å­è³¢å­«", def: "è¬¹å®ˆå­é“çš„è³¢å¾·å­å­«ã€‚", lv1: "æ¯é€¢æ¸…æ˜ç¯€ï¼Œä¾¿æœ‰å¤§æ‰¹______å‰å¾€æƒå¢“ã€‚", lv2: "ä»–æ˜¯é„°é‡Œé–“å…¬èªçš„______ï¼Œå°é•·è¼©éå¸¸æ­é †ã€‚" },
    { word: "ä»»å‹ä»»æ€¨", def: "åšäº‹ä¸è¾­å‹è‹¦ï¼Œä¸æ€•åŸ‹æ€¨ã€‚", lv1: "åª½åª½______åœ°ç…§é¡§æˆ‘å€‘ï¼Œæˆ‘é•·å¤§å¾Œä¸€å®šè¦å¥½å¥½å ±ç­”å¥¹ã€‚", lv2: "ä»–åœ¨åŸºå±¤å´—ä½ä¸Šå·¥ä½œå¤šå¹´ï¼Œä¸€å‘______ã€‚" },
    { word: "å«è¾›èŒ¹è‹¦", def: "å¿å—å„ç¨®è¾›è‹¦ã€‚", lv1: "é€™ä½æ¯è¦ªé•·å¹´ç´¯æœˆ______åœ°ç…§é¡§æ‚£ç—…çš„å­©å­ï¼Œä»¤äººæ•¬ä½©ã€‚", lv2: "çˆ¶æ¯è¦ª______åœ°ä¾›é¤Šæˆ‘å€‘è®€æ›¸ï¼Œæˆ‘å€‘å¿…é ˆå¿ƒå­˜æ„Ÿæ¿€ã€‚" },
    { word: "æ…çµ‚è¿½é ", def: "æ…é‡è¾¦ç†å–ªäº‹ï¼Œèª å¿ƒè¿½å¿µé ç¥–ã€‚", lv1: "äººå€‘åœ¨æ¸…æ˜ç¯€æƒå¢“ç¥­ç¥–ï¼Œé«”ç¾äº†______çš„ç²¾ç¥ã€‚", lv2: "æƒå¢“ä¸åƒ…æ˜¯ç¿’ä¿—ï¼Œæ›´æ˜¯ä¸­è¯æ–‡åŒ–______çš„é«”ç¾ã€‚" },
    { word: "ç¿©ç¿©èµ·èˆ", def: "è¼•ç›ˆé£„é€¸åœ°è·³èˆã€‚", lv1: "éš¨ç€æ‚ æšçš„éŸ³æ¨‚éŸ¿èµ·ï¼Œå¤§å®¶è·Ÿç€æ‹å­______ã€‚", lv2: "ç¾éº—çš„è´è¶åœ¨èŠ±å¢ä¸­______ã€‚" },
    { word: "æ¯é€¢ä½³ç¯€å€æ€è¦ªã€‚", def: "ä¸€å€‹ä½œå®¢ä»–é„‰çš„äººï¼Œæ¯ç•¶ä½³ç¯€ä¾†è‡¨æ™‚ï¼Œå°±æœƒåŠ å€æ€å¿µé æ–¹çš„å®¶äººã€‚", lv1: "ã€Œ______ã€ï¼Œä¸­ç§‹ç¯€å¯èªªæ˜¯æœ€å®¹æ˜“å‹¾èµ·éŠå­æ€é„‰æƒ…æ‡·çš„ç¯€æ—¥ã€‚", lv2: "éš»èº«åœ¨åœ‹å¤–å·¥ä½œï¼Œè¾²æ›†æ–°å¹´æ™‚æœ€èƒ½æ„Ÿå—ã€Œ______ã€ã€‚" }
];

let currentLevel = 1, currentQs = [], qIdx = 0, score = 0;

function showHome() { document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden')); document.getElementById('scr-cover').classList.remove('hidden'); }
function showLevel() { document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden')); document.getElementById('scr-level').classList.remove('hidden'); }

// åˆå§‹åŒ– iOS éŸ³æ•ˆä¸¦é€²å…¥é›£åº¦é¸æ“‡
function initAudioAndShowLevel() {
    // é æ’­æ”¾è§£é– iOS éœéŸ³é™åˆ¶
    const c = document.getElementById('snd-correct');
    const w = document.getElementById('snd-wrong');
    c.play().then(() => { c.pause(); c.currentTime = 0; });
    w.play().then(() => { w.pause(); w.currentTime = 0; });
    showLevel();
}

function showSummary() {
    const cont = document.getElementById('full-list-content');
    // ç”ŸæˆåŒ…å«è§£é‡‹çš„æ¸…å–® 
    cont.innerHTML = idiomBank.map(i => `
        <div class="list-item">
            <b>${i.word}</b>
            <div class="def">ã€è§£é‡‹ã€‘ï¼š${i.def}</div>
            <div class="eg">ã€ä¾‹å¥ã€‘ï¼š${i.lv1}</div>
        </div>
    `).join('');
    document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
    document.getElementById('scr-summary').classList.remove('hidden');
}

function startGame(lv) {
    currentLevel = lv; qIdx = 0; score = 0;
    currentQs = [...idiomBank].sort(()=>0.5-Math.random()).slice(0,10);
    document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
    document.getElementById('scr-game').classList.remove('hidden');
    loadQ();
}

function loadQ() {
    const q = currentQs[qIdx];
    document.getElementById('progress').innerText = `é€²åº¦ï¼š${qIdx + 1} / 10`;
    document.getElementById('q-text').innerText = (currentLevel === 1) ? q.lv1 : q.lv2;
    
    let h = ["â–¡","â–¡","â–¡","â–¡"];
    if(q.word.length <= 4) {
        const r = Math.floor(Math.random()*4);
        h[r] = q.word[r];
    } else {
        h = ["å","è¨€","è­¦","å¥"];
    }
    document.getElementById('q-hint').innerText = "æç¤ºï¼š" + h.join(" ");
    
    document.getElementById('ans-input').value = "";
    document.getElementById('feedback').innerText = "";
    document.getElementById('ans-input').focus();
}

function checkAnswer() {
    const user = document.getElementById('ans-input').value.trim();
    const correct = currentQs[qIdx].word;
    const fb = document.getElementById('feedback');
    
    if (user === correct) {
        score++;
        fb.style.color = "var(--success)";
        fb.innerText = "ç­”å°äº†ï¼ğŸ‘";
        document.getElementById('snd-correct').play();
        setTimeout(next, 1000);
    } else {
        fb.style.color = "var(--error)";
        fb.innerText = "ç­”éŒ¯äº†ï¼ç­”æ¡ˆæ˜¯ï¼š" + correct;
        document.getElementById('snd-wrong').play();
        setTimeout(next, 2500);
    }
}

function next() {
    qIdx++;
    if(qIdx < 10) loadQ();
    else {
        document.getElementById('res-score').innerText = `${score} / 10`;
        document.getElementById('res-msg').innerText = score >= 8 ? "ä½ æ˜¯æˆèªå°å°ˆå®¶ï¼" : "å†å¤šæ¸©ç¿’æ¸…å–®ï¼ŒåŠ æ²¹ï¼";
        document.querySelectorAll('.screen').forEach(s=>s.classList.add('hidden'));
        document.getElementById('scr-result').classList.remove('hidden');
    }
}

// ç›£è½ Enter éµæäº¤
document.getElementById('ans-input').addEventListener('keypress', (e)=>{ if(e.key==='Enter') checkAnswer(); });
</script>

</body>
</html>