<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ä¸­ä¸€åå¥æº«ç¿’ - iPhone/iPad ä¿®å¾©ç‰ˆ</title>
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --success: #27ae60; --error: #e74c3c; --bg: #f8f9fa; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { 
            font-family: -apple-system, "PingFang HK", "Helvetica Neue", sans-serif; 
            background-color: var(--bg); margin: 0; display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 20px;
        }
        .game-card { 
            width: 100%; max-width: 650px; min-height: 500px; background: white; padding: 30px; border-radius: 24px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.08); display: flex; flex-direction: column;
        }
        .progress-bar { width: 100%; height: 6px; background: #eee; border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--accent); width: 0%; transition: width 0.3s; }
        h2 { color: var(--primary); font-size: 1.1em; text-align: center; margin: 0 0 20px 0; opacity: 0.7; }
        
        /* ç¢ºä¿é¡Œç›®å€åŸŸå¯è¦‹ */
        .question-content { 
            flex-grow: 1; display: flex; flex-wrap: wrap; justify-content: center; align-content: center;
            font-size: 1.8em; line-height: 2; color: #2c3e50; text-align: center; gap: 8px; margin: 20px 0;
        }
        @media (max-width: 480px) { .question-content { font-size: 1.4em; } input { width: 40px !important; height: 40px !important; } }

        input { 
            border: 2px solid #dfe6e9; width: 50px; height: 50px; text-align: center; font-size: 1em; 
            border-radius: 12px; outline: none; background: #fff; transition: 0.2s; -webkit-appearance: none;
        }
        input:focus { border-color: var(--accent); background: #f0f7ff; }
        input.correct { border-color: var(--success); background: #eafaf1; color: var(--success); }
        input.wrong { border-color: var(--error); background: #fdeded; color: var(--error); }

        .feedback { font-weight: bold; font-size: 1.1em; min-height: 1.5em; text-align: center; margin: 10px 0; }
        button { 
            width: 100%; padding: 18px; font-size: 1.1em; cursor: pointer; border: none; border-radius: 16px;
            font-weight: bold; transition: 0.2s; touch-action: manipulation;
        }
        .check-btn { background: var(--primary); color: white; }
        .next-btn { background: var(--success); color: white; display: none; }
        .restart-btn { background: var(--accent); color: white; display: none; }
    </style>
</head>
<body>

<div class="game-card">
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    <h2>ä¸­è¯ç¶“å…¸åå¥ (11-20)</h2>
    
    <div class="question-content" id="question-box">è¼‰å…¥ä¸­...</div>
    <div class="feedback" id="feedback"></div>

    <div class="footer-btns">
        <button class="check-btn" id="check-btn" onclick="checkCurrentAnswer()">æª¢æŸ¥ç­”æ¡ˆ [cite: 80]</button>
        <button class="next-btn" id="next-btn" onclick="nextQuestion()">ä¸‹ä¸€é¡Œ [cite: 80]</button>
        <button class="restart-btn" id="restart-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡ [cite: 80]</button>
    </div>
</div>

<script>
    const sentences = [
        "æ¡èŠæ±ç±¬ä¸‹ï¼Œæ‚ ç„¶è¦‹å—å±±ã€‚", // 11 
        "æ˜æœˆæ¾é–“ç…§ï¼Œæ¸…æ³‰çŸ³ä¸Šæµã€‚ç«¹å–§æ­¸æµ£å¥³ï¼Œè“®å‹•ä¸‹æ¼èˆŸã€‚", // 12 
        "å±±ä¸åœ¨é«˜ï¼Œæœ‰ä»™å‰‡åã€‚æ°´ä¸åœ¨æ·±ï¼Œæœ‰é¾å‰‡éˆã€‚æ–¯æ˜¯é™‹å®¤ï¼ŒæƒŸå¾å¾·é¦¨ã€‚", // 13 
        "æ‚ æ‚ ä¹èˆ‡é¡¥æ°£ä¿±ï¼Œè€Œè«å¾—å…¶æ¶¯ï¼›æ´‹æ´‹ä¹èˆ‡é€ ç‰©è€…éŠï¼Œè€Œä¸çŸ¥å…¶æ‰€çª®ã€‚", // 14 
        "çˆ¶æ¯ä¹‹å¹´ï¼Œä¸å¯ä¸çŸ¥ä¹Ÿã€‚ä¸€å‰‡ä»¥å–œï¼Œä¸€å‰‡ä»¥æ‡¼ã€‚", // 15 
        "èª°è¨€å¯¸è‰å¿ƒï¼Œå ±å¾—ä¸‰æ˜¥æš‰ã€‚", // 16 
        "æ€çˆ¾ç‚ºé››æ—¥ï¼Œé«˜é£›èƒŒæ¯æ™‚ã€‚ç•¶æ™‚çˆ¶æ¯å¿µï¼Œä»Šæ—¥çˆ¾æ‡‰çŸ¥ï¼", // 17 
        "ç™¾é³¥è±ˆç„¡æ¯ï¼Ÿçˆ¾ç¨å“€æ€¨æ·±ã€‚æ‡‰æ˜¯æ¯æ…ˆé‡ï¼Œä½¿çˆ¾æ‚²ä¸ä»»ã€‚", // 18 
        "æµ·å…§å­˜çŸ¥å·±ï¼Œå¤©æ¶¯è‹¥æ¯”é„°ã€‚", // 19 
        "æ¯é€¢ä½³ç¯€å€æ€è¦ªã€‚" // 20 
    ];

    let currentIndex = 0;
    let score = 0;

    function loadQuestion() {
        const box = document.getElementById('question-box');
        const feedback = document.getElementById('feedback');
        const progressFill = document.getElementById('progress-fill');
        const text = sentences[currentIndex];
        
        progressFill.style.width = `${((currentIndex + 1) / 10) * 100}%`;
        feedback.innerText = "";
        box.innerHTML = "";
        
        let chars = text.split("");
        let indices = chars.map((c, i) => /[ï¼Œã€‚ï¼Ÿï¼ï¼›ã€]/.test(c) ? -1 : i).filter(i => i !== -1);
        let numToHide = Math.min(3, Math.max(1, Math.floor(indices.length * 0.3)));
        let hiddenIndices = indices.sort(() => 0.5 - Math.random()).slice(0, numToHide);

        chars.forEach((char, i) => {
            if (hiddenIndices.includes(i)) {
                const input = document.createElement('input');
                input.type = "text";
                input.maxLength = 1;
                input.dataset.ans = char;
                input.setAttribute('inputmode', 'text');
                input.oninput = function() {
                    if(this.value.length === 1) {
                        const all = Array.from(document.querySelectorAll('input'));
                        const nextIdx = all.indexOf(this) + 1;
                        if(all[nextIdx]) all[nextIdx].focus();
                    }
                };
                box.appendChild(input);
            } else {
                const span = document.createElement('span');
                span.innerText = char;
                box.appendChild(span);
            }
        });

        document.getElementById('check-btn').style.display = "block";
        document.getElementById('next-btn').style.display = "none";
    }

    function checkCurrentAnswer() {
        const inputs = document.querySelectorAll('#question-box input');
        let isCorrect = true;
        inputs.forEach(input => {
            if (input.value === input.dataset.ans) { input.classList.add('correct'); } 
            else { input.classList.add('wrong'); isCorrect = false; }
            input.disabled = true;
        });

        const feedback = document.getElementById('feedback');
        if (isCorrect) { feedback.innerText = "æ­£ç¢ºï¼âœ¨"; feedback.style.color = "var(--success)"; score++; } 
        else { feedback.innerText = `ç­”æ¡ˆï¼š${Array.from(inputs).map(i=>i.dataset.ans).join(',')}`; feedback.style.color = "var(--error)"; }

        document.getElementById('check-btn').style.display = "none";
        document.getElementById('next-btn').style.display = "block";
    }

    function nextQuestion() {
        if (currentIndex < 9) { currentIndex++; loadQuestion(); } 
        else { showFinalResult(); }
    }

    function showFinalResult() {
        document.getElementById('title').innerText = "ç·´ç¿’å®Œç•¢";
        document.getElementById('question-box').innerHTML = `<div style="width:100%">ç¸½å¾—åˆ†<br><span style="font-size:2.5em; color:var(--accent);">${score}</span> / 10</div>`;
        document.getElementById('next-btn').style.display = "none";
        document.getElementById('restart-btn').style.display = "block";
        document.getElementById('feedback').innerText = score >= 8 ? "è¡¨ç¾å„ªç§€ï¼ğŸ‰" : "ç¹¼çºŒåŠ æ²¹ï¼";
    }

    // ç¢ºä¿ DOM è¼‰å…¥å¾ŒåŸ·è¡Œ
    document.addEventListener('DOMContentLoaded', loadQuestion);
</script>

</body>
</html>