<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>è–ç¶“ç§‘ Unit 4 å¾©ç¿’éŠæˆ²</title>
    <style>
        body { font-family: "Microsoft JhengHei", sans-serif; background: #fff9c4; margin: 0; display: flex; justify-content: center; padding: 15px; }
        #game-box { width: 100%; max-width: 450px; background: white; border-radius: 25px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; border: 4px solid #ffeb3b; }
        .q-container { position: relative; margin-bottom: 25px; background: #fffde7; padding: 20px; border-radius: 15px; }
        .q-text { font-size: 1.3rem; font-weight: bold; color: #333; margin-right: 35px; display: inline-block; text-align: left; vertical-align: middle; }
        .speak-btn { background: #ff9800; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; position: absolute; right: 10px; top: 50%; transform: translateY(-50%); box-shadow: 0 4px 0 #e65100; }
        .speak-btn:active { box-shadow: none; transform: translateY(-45%); }
        .btn-grid { display: grid; gap: 12px; }
        button.option-btn { padding: 18px; font-size: 1.1rem; border: 2px solid #eee; border-radius: 15px; background: #fff; cursor: pointer; font-weight: 500; }
        .correct { background: #c8e6c9 !important; border-color: #4caf50 !important; color: #2e7d32; animation: bounce 0.5s; }
        .wrong { background: #ffcdd2 !important; border-color: #f44336 !important; color: #c62828; }
        #hint { margin-top: 15px; font-weight: bold; color: #f57c00; font-size: 1rem; min-height: 24px; }
        #progress { font-size: 0.9rem; color: #9e9e9e; margin-bottom: 10px; font-weight: bold; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

<div id="game-box">
    <div id="progress">è–ç¶“ç§‘ç¬¬å››èª²ï¼šäºä¼¯æ‹‰ç½•ç”Ÿä»¥æ’’</div>
    <div id="main-area">
        <div class="q-container">
            <div class="q-text" id="question">æº–å‚™å¥½é–‹å§‹æº«ç¿’å—ï¼Ÿ</div>
            <button class="speak-btn" onclick="speakCurrentQ()" id="speak-icon">ğŸ”Š</button>
        </div>
        <div class="btn-grid" id="options">
            <button class="option-btn" onclick="startGame()">é–‹å§‹éŠæˆ²</button>
        </div>
    </div>
    <div id="hint"></div>
</div>

<script>
    const quizData = [
        { q: "ç¥æ‡‰è¨±çµ¦æ’’æ‹‰ç”šéº¼ï¼Ÿ", a: ["ä¸€å€‹å…’å­", "æˆ¿å­", "ä¸€å¡Šç”°", "é‡‘éŠ€"], c: 0 },
        { q: "æ’’æ‹‰è½è¦‹ç¥çš„æ‡‰è¨±å¾Œæœ‰ç”šéº¼åæ‡‰ï¼Ÿ", a: ["ç«Šç¬‘", "é–‹å¿ƒ", "å‚·å¿ƒ", "æ†‚æ„"], c: 0 },
        { q: "æ’’æ‹‰ç‚ºä»€éº¼ä¸ç›¸ä¿¡è‡ªå·±èƒ½å¤ ç”Ÿå­©å­ï¼Ÿ", a: ["å› ç‚ºå¥¹å·²å¹´è€", "å› ç‚ºå¥¹ä¸èªç‚ºç¥æ„›å¥¹", "å› ç‚ºå¥¹æœ‰å¾ˆå¤šå…’å¥³", "å› ç‚ºå¥¹ä¸æƒ³ç”Ÿå°å­©"], c: 0 },
        { q: "ç¥å‘Šè¨´æ’’æ‹‰ç”šéº¼æ™‚å€™å¥¹å¿…ç”Ÿä¸€å€‹å…’å­ï¼Ÿ", a: ["ä¸€å¹´å¾Œ", "åŠå¹´å¾Œ", "å…©å¹´å¾Œ", "ä¸‰å¹´å¾Œ"], c: 0 },
        { q: "äºä¼¯æ‹‰ç½•çµ¦æ’’æ‹‰æ‰€ç”Ÿçš„å…’å­èµ·åå«ä»€éº¼ï¼Ÿ", a: ["ä»¥æ’’", "æ’’æ¯è€³", "æŒªäº", "ä»¥æƒ"], c: 0 },
        { q: "æ˜¯éé¡Œï¼šæ’’æ‹‰å¹´è€æ™‚ä»èƒ½ç”Ÿå°å­©æ˜¯ä¸€å€‹ç¥è¹Ÿã€‚", a: ["âœ”ï¸ å°", "âœ–ï¸ éŒ¯"], c: 0 },
        { q: "æ˜¯éé¡Œï¼šæ’’æ‹‰ä¸€ç›´ç›¸ä¿¡ç¥æ‡‰è¨±å¥¹èƒ½æ‡·å­•ç”Ÿå­ã€‚", a: ["âœ–ï¸ éŒ¯ (å¥¹æ›¾ç«Šç¬‘)", "âœ”ï¸ å°"], c: 0 },
        { q: "æ˜¯éé¡Œï¼šæ’’æ‹‰å’Œäºä¼¯æ‹‰ç½•ç‚ºè‘—ä»¥æ’’æ„Ÿè¬ç¥çš„æ‡‰è¨±ã€‚", a: ["âœ”ï¸ å°", "âœ–ï¸ éŒ¯"], c: 0 },
        { q: "æ˜¯éé¡Œï¼šç¥æ˜¯æ²’æœ‰äº‹æƒ…åšä¸åˆ°çš„ã€‚", a: ["âœ”ï¸ å°", "âœ–ï¸ éŒ¯"], c: 0 },
        { q: "é‡‘å¥å¡«å……ï¼šè€¶å’Œè¯è±ˆæœ‰____æˆçš„äº‹å—ï¼Ÿ", a: ["é›£", "è‹¦", "æ˜“", "å¤§"], c: 0 },
        { q: "è–ç¶“å¡«å……ï¼šåœ¨ä¿¡çš„äººï¼Œ____éƒ½èƒ½ã€‚", a: ["å‡¡äº‹", "å¾ˆå¤šäº‹", "å¥½äº‹", "ä¸€äº›äº‹"], c: 0 }
    ];

    let currentQ = 0;
    let shuffledList = [];

    function speak(text) {
        window.speechSynthesis.cancel();
        const msg = new SpeechSynthesisUtterance(text);
        msg.lang = 'zh-HK';
        msg.rate = 0.9;
        window.speechSynthesis.speak(msg);
    }

    function speakCurrentQ() {
        const text = document.getElementById('question').innerText;
        speak(text);
    }

    function startGame() {
        shuffledList = [...quizData].sort(() => Math.random() - 0.5);
        currentQ = 0;
        document.getElementById('speak-icon').style.display = 'inline-flex';
        showQuestion();
    }

    function showQuestion() {
        if (currentQ >= shuffledList.length) {
            document.getElementById('main-area').innerHTML = "<h2>ğŸ‰ æº«ç¿’å®Œæˆï¼</h2><button class='option-btn' style='width:100%;background:#ffeb3b' onclick='location.reload()'>é‡æ–°é–‹å§‹</button>";
            document.getElementById('progress').innerText = "å°æœ‹å‹å¥½æ£’ï¼";
            document.getElementById('hint').innerText = "";
            return;
        }

        const data = shuffledList[currentQ];
        document.getElementById('progress').innerText = `é¡Œç›® ${currentQ + 1} / ${shuffledList.length}`;
        document.getElementById('question').innerText = data.q;
        document.getElementById('hint').innerText = "";
        
        const optsDiv = document.getElementById('options');
        optsDiv.innerHTML = "";

        let indices = data.a.map((_, i) => i).sort(() => Math.random() - 0.5);
        
        indices.forEach(idx => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = data.a[idx];
            btn.onclick = () => checkAnswer(idx, data.c, btn, data.a[data.c]);
            optsDiv.appendChild(btn);
        });
        
        // è‡ªå‹•è®€å‡ºæ–°é¡Œç›®
        setTimeout(() => speak(data.q), 300);
    }

    function checkAnswer(picked, correct, btn, correctText) {
        const buttons = document.querySelectorAll('.option-btn');
        if (picked === correct) {
            buttons.forEach(b => b.disabled = true);
            btn.classList.add('correct');
            speak("ç­”å°äº†ï¼");
            setTimeout(() => {
                currentQ++;
                showQuestion();
            }, 1200);
        } else {
            btn.classList.add('wrong');
            document.getElementById('hint').innerText = `æç¤ºï¼šæ­£ç¢ºç­”æ¡ˆæ˜¯ã€Œ${correctText}ã€`;
            speak("ä¸æ­£ç¢ºï¼Œè«‹å†è©¦ä¸€æ¬¡ã€‚æ­£ç¢ºç­”æ¡ˆæ˜¯ " + correctText);
            // ä¸ç¦ç”¨æŒ‰éˆ•ï¼Œè®“å°æœ‹å‹é¸å°ç‚ºæ­¢
            setTimeout(() => btn.classList.remove('wrong'), 1500);
        }
    }
    
    // åˆå§‹éš±è—å–‡å­
    document.getElementById('speak-icon').style.display = 'none';
</script>
</body>
</html>