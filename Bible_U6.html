<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ËÅñÁ∂ìÁßë U6 Ê∫´ÁøíÈÅäÊà≤</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --correct-color: #4caf50;
            --wrong-color: #f44336;
            --bg-color: #f0f7ff;
            --sort-bg: #fff9db;
        }

        body {
            font-family: "Microsoft JhengHei", sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            touch-action: manipulation;
        }

        #game-container {
            width: 95%;
            max-width: 600px;
            background: white;
            margin-top: 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 15px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .question-box {
            font-size: 1.3rem;
            line-height: 1.6;
            margin: 15px 0;
            min-height: 60px;
            color: #333;
            font-weight: bold;
        }

        .audio-btn {
            background: #ffeb3b;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 4px 0 #d4c200;
            margin-bottom: 10px;
        }

        #sort-area {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
            padding: 10px;
            background: #eee;
            border-radius: 10px;
        }

        .sort-item {
            background: var(--sort-bg);
            border: 2px dashed #e67e22;
            padding: 15px;
            border-radius: 10px;
            cursor: grab;
            font-weight: bold;
            font-size: 1.1rem;
            touch-action: none;
        }

        .options-container {
            display: grid;
            gap: 12px;
        }

        .option-btn {
            background: white;
            border: 3px solid var(--primary-color);
            padding: 15px;
            font-size: 1.2rem;
            border-radius: 15px;
            cursor: pointer;
            color: var(--primary-color);
            font-weight: bold;
            min-height: 65px;
        }

        .correct { background-color: var(--correct-color) !important; color: white !important; }
        .wrong { background-color: var(--wrong-color) !important; color: white !important; }

        .btn-check {
            background: #e67e22;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 50px;
            margin-top: 10px;
            cursor: pointer;
            display: none;
        }

        #feedback-modal {
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white; padding: 30px;
            border-radius: 20px; z-index: 100;
            width: 85%; text-align: center;
            box-shadow: 0 0 50px rgba(0,0,0,0.3);
        }

        .overlay {
            display: none; position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 99;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <div class="header-info">
            <div id="progress">Â∑≤ÂÆåÊàêÔºö0</div>
            <div id="remaining">È§ò‰∏ãÔºö0</div>
        </div>

        <button class="audio-btn" onclick="speakCurrentQuestion()">üîä</button>
        <div class="question-box" id="question-text">ËºâÂÖ•‰∏≠...</div>

        <div id="sort-area"></div>
        <button id="check-sort-btn" class="btn-check" onclick="verifySort()">Ê™¢Êü•È†ÜÂ∫è</button>

        <div class="options-container" id="options"></div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div id="feedback-modal">
        <h2 id="feedback-title">ÁµêÊûú</h2>
        <p id="feedback-msg" style="font-size: 1.2rem; line-height: 1.5;"></p>
        <button class="option-btn" style="width:100%; margin-top:15px;" onclick="closeModal()">‰∏ã‰∏ÄÈ°å</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script>
        const quizData = [
            { q: "Á•ûÂê©Âíê‰∫û‰ºØÊãâÁΩïÊääÂÖíÂ≠êÁçªÁÇ∫ __________„ÄÇ", a: "ÁáîÁ•≠", options: ["ÁáîÁ•≠", "Âπ≥ÂÆâÁ•≠", "Ë¥ñÁΩ™Á•≠"], type: "click" },
            { q: "ÊàëË¶ÅÂ≠∏ÁøíÂêëÁ•û __________ ÊúÄÂ•ΩÁöÑÊù±Ë•øÔºåÂõ†ÁÇ∫‰∏ÄÂàáÈÉΩÊòØÁ•ÇË≥úÁöÑ„ÄÇ", a: "Â•âÁçª", options: ["Â•âÁçª", "Ë≥ºË≤∑", "ÂÄüÁî®"], type: "click" },
            { q: "‰∫û‰ºØÊãâÁΩïË¢´Á®±ÁÇ∫„Äå __________ „ÄçÔºåÊòØÊàëÂÄë‰ø°ÂøÉÁöÑÊ¶úÊ®£„ÄÇ", a: "‰ø°ÂøÉ‰πãÁà∂", options: ["‰ø°ÂøÉ‰πãÁà∂", "Êô∫ÊÖß‰πãÁéã", "Ë™†ÂØ¶‰πã‰∫∫"], type: "click" },
            { q: "„Äå __________ „ÄçÁöÑÊÑèÊÄùÂ∞±ÊòØ„ÄåËÄ∂ÂíåËèØÂøÖÈ†êÂÇô„Äç„ÄÇ", a: "ËÄ∂ÂíåËèØ‰ª•Âãí", options: ["ËÄ∂ÂíåËèØ‰ª•Âãí", "ËÄ∂ÂíåËèØÊ≤ôÈæç", "ËÄ∂ÂíåËèØÂ∞ºË•ø"], type: "click" },
            { q: "‰ª•ÊííÊòØ‰∫û‰ºØÊãâÁΩï __________ ÊôÇÊâÄÁîüÁöÑÂÖíÂ≠ê„ÄÇ", a: "Âπ¥ËÄÅÊôÇ", options: ["Âπ¥Â∞ëÊôÇ", "Âπ¥ÈùíÊôÇ", "Âπ¥ËÄÅÊôÇ"], type: "click" },
            { q: "‰∫û‰ºØÊãâÁΩïÁØâÂ£áÂæåÔºåÂ∞á __________ ÊçÜÁ∂ÅÔºåÊîæÂú®Â£áÁöÑÊü¥‰∏ä„ÄÇ", a: "‰ª•Êíí", options: ["ÂÉï‰∫∫", "‰ª•Êíí", "ÊØçÁæä"], type: "click" },
            { q: "Á•ûÊúÄÂæåÈ†êÂÇô‰∫Ü‰∏ÄÈöª __________ ‰ª£Êõø‰ª•Êíí‰ΩúÁÇ∫ÁáîÁ•≠„ÄÇ", a: "ÂÖ¨Áæä", options: ["ÂÖ¨Áæä", "ÂÖ¨Áâõ", "È©¢Â≠ê"], type: "click" },
            { q: "Â∞áÁÑ°ÊÆòÁñæÂíåÁÑ°ÁëïÁñµÁöÑÁâ≤ÁïúÊîæÂú®Â£á‰∏äÁáíÁõ°ÁçªÁµ¶Á•ûÔºåÈÄôÂè´‰Ωú __________„ÄÇ", a: "ÁáîÁ•≠", options: ["ÁáîÁ•≠", "Ê¥óÁ¶Æ", "Â•âÁçª"], type: "click" },
            { q: "‰∫û‰ºØÊãâÁΩïÈ°òÊÑèÁçª‰∏äÊúÄÂøÉÊÑõÁöÑÂÖíÂ≠êÔºåË°®Á§∫‰ªñÂæà __________ Á•ûÂèäÈ†ÜÊúçÁ•û„ÄÇ", a: "Êï¨Áïè", options: ["Êï¨Áïè", "ÂÆ≥ÊÄï", "Âà©Áî®"], type: "click" },
            { 
                type: "sort",
                q: "Ë´ãÊãñÂãïÂç°ÁâáÊéíÂàóÈáëÂè• (Ââµ‰∏ñË®ò 22:14)Ôºö",
                correctOrder: ["‰∫û‰ºØÊãâÁΩïÁµ¶ÈÇ£Âú∞Êñπ", "Ëµ∑ÂêçÂè´„ÄåËÄ∂ÂíåËèØ‰ª•Âãí„Äç„ÄÇ", "Áõ¥Âà∞‰ªäÊó•‰∫∫ÈÇÑË™™Ôºö", "„ÄåÂú®ËÄ∂ÂíåËèØÁöÑÂ±±‰∏ä", "ÂøÖÊúâÈ†êÂÇô„ÄÇ„Äç"]
            }
        ];

        let currentIdx = 0;
        let shuffledQuiz = [];

        function init() {
            shuffledQuiz = [...quizData].sort(() => Math.random() - 0.5);
            render();
        }

        function render() {
            const data = shuffledQuiz[currentIdx];
            document.getElementById('progress').innerText = `Â∑≤ÂÆåÊàêÔºö${currentIdx}`;
            document.getElementById('remaining').innerText = `È§ò‰∏ãÔºö${shuffledQuiz.length - currentIdx}`;
            document.getElementById('question-text').innerText = data.q;
            
            const optionsDiv = document.getElementById('options');
            const sortArea = document.getElementById('sort-area');
            const checkBtn = document.getElementById('check-sort-btn');
            
            optionsDiv.innerHTML = '';
            sortArea.innerHTML = '';
            sortArea.style.display = 'none';
            checkBtn.style.display = 'none';

            if (data.type === "sort") {
                sortArea.style.display = 'flex';
                checkBtn.style.display = 'inline-block';
                [...data.correctOrder].sort(() => Math.random() - 0.5).forEach(text => {
                    const div = document.createElement('div');
                    div.className = 'sort-item';
                    div.innerText = text;
                    sortArea.appendChild(div);
                });
                new Sortable(sortArea, { animation: 150 });
            } else {
                [...data.options].sort(() => Math.random() - 0.5).forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.innerText = opt;
                    btn.onclick = () => checkClick(opt, btn);
                    optionsDiv.appendChild(btn);
                });
            }
            setTimeout(speakCurrentQuestion, 500);
        }

        function verifySort() {
            const items = Array.from(document.querySelectorAll('.sort-item')).map(el => el.innerText);
            if (JSON.stringify(items) === JSON.stringify(shuffledQuiz[currentIdx].correctOrder)) {
                showFeedback("Â§™Ê£í‰∫ÜÔºÅÈáëÂè•ÂÆåÂÖ®Ê≠£Á¢∫ÔºÅ", true);
            } else {
                showFeedback("È†ÜÂ∫èÈÇÑ‰∏çÂ∞çÂñîÔºÅ\nÊèêÁ§∫Ôºö‰∫û‰ºØÊãâÁΩïÁµ¶ÈÇ£Âú∞Êñπ...Ëµ∑ÂêçÂè´...", false);
            }
        }

        function checkClick(val, btn) {
            if (val === shuffledQuiz[currentIdx].a) {
                btn.classList.add('correct');
                setTimeout(() => next(), 800);
            } else {
                btn.classList.add('wrong');
                showFeedback(`Á≠îÈåØ‰∫ÜÔºåÊ≠£Á¢∫Á≠îÊ°àÊòØÔºö${shuffledQuiz[currentIdx].a}`, false);
            }
        }

        function showFeedback(msg) {
            document.getElementById('feedback-msg').innerText = msg;
            document.getElementById('overlay').style.display = 'block';
            document.getElementById('feedback-modal').style.display = 'block';
        }

        function closeModal() {
            document.getElementById('overlay').style.display = 'none';
            document.getElementById('feedback-modal').style.display = 'none';
            if (shuffledQuiz[currentIdx].type !== 'sort' || document.getElementById('feedback-msg').innerText.includes("Ê≠£Á¢∫")) next();
        }

        function next() {
            currentIdx++;
            if (currentIdx < shuffledQuiz.length) render();
            else {
                document.getElementById('question-text').innerText = "Ë§áÁøíÂÆåÊàêÔºÅÁ•ùËÄÉË©¶È†ÜÂà©ÔºÅ";
                document.getElementById('options').innerHTML = '<button class="option-btn" onclick="location.reload()">ÈáçÊñ∞Ê∫´Áøí</button>';
            }
        }

        function speakCurrentQuestion() {
            // Â∞áÂ∫ïÁ∑öËÆÄ‰Ωú„ÄåXXXX„Äç
            const text = shuffledQuiz[currentIdx].q.replace(/__________/g, "ÂòüÂòüÂòüÂòü");
            const msg = new SpeechSynthesisUtterance(text);
            msg.lang = 'zh-HK';
            window.speechSynthesis.speak(msg);
        }

        init();
    </script>
</body>
</html>