<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>äºŒå¹´ç´šè–ç¶“é‡‘å¥é‡çµ„ (èªéŸ³ç‰ˆ)</title>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    <style>
        :root {
            --primary: #64b5f6;
            --bg: #f8f9fa;
            --correct: #66bb6a;
            --error: #ef5350;
            --text-color: #37474f;
        }

        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            touch-action: none;
        }

        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { font-size: 1.5rem; color: #1565c0; margin: 5px 0; }

        #game-box {
            width: 100%;
            max-width: 500px;
            background: white;
            padding: 20px;
            border-radius: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        .verse-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: #e3f2fd;
            padding: 10px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .verse-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #1976d2;
        }

        .speaker-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
        }

        #drag-area {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 30px;
            min-height: 200px;
        }

        .drag-card {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 15px;
            font-size: 1.2rem;
            color: var(--text-color);
            text-align: center;
            cursor: grab;
            box-shadow: 0 4px 0 #eeeeee;
        }

        .btn-check {
            width: 100%;
            padding: 18px;
            background: #ffb300;
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: bold;
            box-shadow: 0 5px 0 #e6a100;
            cursor: pointer;
        }

        #msg {
            height: 30px;
            text-align: center;
            margin-top: 15px;
            font-weight: bold;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>ğŸ“– é‡‘å¥é‡çµ„ (å»£æ±è©±ç‰ˆ)</h1>
    </div>

    <div id="game-box">
        <div class="verse-header">
            <div id="verse-title" class="verse-title">è¼‰å…¥ä¸­...</div>
            <button class="speaker-btn" onclick="speakCurrentVerse()">ğŸ”Š</button>
        </div>
        
        <div id="drag-area"></div>

        <button id="next-btn" class="btn-check" onclick="handleButtonClick()">æª¢æŸ¥ç­”æ¡ˆ</button>

        <div id="msg"></div>
    </div>

    <script>
        const bibleData = [
            {
                lesson: "ç¬¬ä¸€èª²: ç´„ç¿°ç¦éŸ³ 3:16",
                chunks: ["ç¥æ„›ä¸–äººï¼Œ", "ç”šè‡³å°‡ä»–ç¨ä¸€çš„å…’å­", "è³œçµ¦ä»–å€‘ï¼Œ", "å«ä¸€åˆ‡ä¿¡ä»–çš„äºº", "ä¸è‡´æ»…äº¡ï¼Œ", "å¾—æ°¸ç”Ÿã€‚"] 
            },
            {
                lesson: "ç¬¬äºŒèª²: è·¯åŠ ç¦éŸ³ 21:33",
                chunks: ["å¤©åœ°è¦å»¢å»ï¼Œ", "æˆ‘çš„è©±å»", "çµ•ä¸å»¢å»ã€‚"]
            },
            {
                lesson: "ç¬¬äºŒèª²: è©©ç¯‡ 1:2ä¸‹",
                chunks: ["æƒŸå–œæ„›è€¶å’Œè¯çš„å¾‹æ³•ï¼Œ", "æ™å¤œæ€æƒ³ç¥‚çš„å¾‹æ³•ï¼›", "é€™äººä¾¿ç‚ºæœ‰ç¦ï¼"]
            },
            {
                lesson: "ç¬¬ä¸‰èª²: é›…å„æ›¸ 4:6ä¸‹",
                chunks: ["ç¥æŠµæ“‹é©•å‚²çš„äººï¼Œ", "ä½†è³œæ©çµ¦", "è¬™å‘çš„äººã€‚"]
            },
            {
                lesson: "ç¬¬å››èª²: å‰µä¸–è¨˜ 18:14ä¸Š",
                chunks: ["è€¶å’Œè¯", "è±ˆæœ‰", "é›£æˆçš„äº‹å—ï¼Ÿ"]
            },
            {
                lesson: "ç¬¬äº”èª²: é›…å„æ›¸ 5:16ä¸‹",
                chunks: ["ç¾©äººç¥ˆç¦±", "æ‰€ç™¼çš„åŠ›é‡", "æ˜¯å¤§æœ‰åŠŸæ•ˆçš„ã€‚"]
            },
            {
                lesson: "ç¬¬å…­èª²: å‰µä¸–è¨˜ 22:14",
                chunks: ["äºä¼¯æ‹‰ç½•çµ¦é‚£åœ°æ–¹", "èµ·åå«ã€Œè€¶å’Œè¯ä»¥å‹’ã€ã€‚", "ç›´åˆ°ä»Šæ—¥äººé‚„èªªï¼š", "ã€Œåœ¨è€¶å’Œè¯çš„å±±ä¸Š", "å¿…æœ‰é å‚™ã€‚ã€"]
            }
        ];

        let currentIdx = 0;
        let sortable;

        function speak(text) {
            window.speechSynthesis.cancel(); // åœæ­¢ä¹‹å‰çš„æœ—è®€
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'zh-HK'; // è¨­å®šç‚ºå»£æ±è©±
            utterance.rate = 0.9;     // èªé€Ÿç¨å¾®æ”¾æ…¢
            window.speechSynthesis.speak(utterance);
        }

        function speakCurrentVerse() {
            const text = bibleData[currentIdx].chunks.join('');
            speak(text);
        }

        function loadQuestion() {
            const q = bibleData[currentIdx];
            document.getElementById('verse-title').innerText = q.lesson;
            document.getElementById('msg').innerText = "";
            document.getElementById('next-btn').innerText = "æª¢æŸ¥ç­”æ¡ˆ";
            document.getElementById('next-btn').style.background = "#ffb300";

            const area = document.getElementById('drag-area');
            area.innerHTML = '';
            
            const shuffled = [...q.chunks].sort(() => Math.random() - 0.5);
            shuffled.forEach(text => {
                const div = document.createElement('div');
                div.className = 'drag-card';
                div.innerText = text;
                area.appendChild(div);
            });

            if(sortable) sortable.destroy();
            sortable = new Sortable(area, { animation: 200 });

            // å»¶é²ä¸€é»é»æœ—è®€ï¼Œç¢ºä¿å°æœ‹å‹æº–å‚™å¥½
            setTimeout(speakCurrentVerse, 500);
        }

        function handleButtonClick() {
            if (document.getElementById('next-btn').innerText === "æª¢æŸ¥ç­”æ¡ˆ") {
                checkAnswer();
            } else {
                nextLevel();
            }
        }

        function checkAnswer() {
            const currentOrder = Array.from(document.querySelectorAll('.drag-card')).map(el => el.innerText);
            const correctOrder = bibleData[currentIdx].chunks;
            const msgEl = document.getElementById('msg');

            if (JSON.stringify(currentOrder) === JSON.stringify(correctOrder)) {
                msgEl.innerText = "ğŸŒŸ å¤ªæ£’äº†ï¼æ’åˆ—æ­£ç¢ºï¼";
                msgEl.style.color = "#66bb6a";
                document.getElementById('next-btn').innerText = "ä¸‹ä¸€é¡Œ";
                document.getElementById('next-btn').style.background = "#66bb6a";
                speak("ç­”å°äº†ï¼Œåšå¾—å¥½ï¼");
            } else {
                msgEl.innerText = "âŒ é †åºä¸å°ï¼Œå†è©¦è©¦çœ‹ï¼";
                msgEl.style.color = "#ef5350";
                speak("é †åºå””å•±ï¼Œå†è©¦ä¸‹å•¦ã€‚");
            }
        }

        function nextLevel() {
            currentIdx++;
            if (currentIdx >= bibleData.length) {
                document.getElementById('game-box').innerHTML = "<h2 style='text-align:center'>ğŸ† æŒ‘æˆ°æˆåŠŸï¼</h2><button class='btn-check' onclick='location.reload()'>é‡æ–°é–‹å§‹</button>";
                speak("æ­å–œä½ ï¼Œå…¨éƒ¨ç­”å•±æ™’ï¼");
            } else {
                loadQuestion();
            }
        }

        // åˆå§‹åŒ–
        loadQuestion();
    </script>
</body>
</html>